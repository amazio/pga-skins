(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{85:function(e,t,a){e.exports=a(99)},91:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=a(13),u=a(34),i=Object(n.createContext)({state:null,dispatch:null}),s=a(17),m={getSavedMatches:d,getMatchesByTourneyId:function(e){return d().filter((function(t){return t.tourneyId===e}))},getCurAndPrevSavedMatches:function(e){var t=d(),a=t.filter((function(t){return t.tourneyId===e})),n=t.filter((function(t){return t.tourneyId!==e}));return[a,n,t]},updateSavedMatch:function(e){var t=d(),a=t.findIndex((function(t){return t._id===e._id}));-1===a?t.unshift(e):t[a]=e;window.localStorage.setItem("matches",JSON.stringify(t))}};function d(){var e=JSON.parse(window.localStorage.getItem("matches"));return Array.isArray(e)||(window.localStorage.setItem("matches","[]"),e=[]),e}var h={settings:{deviceId:"",username:"",moneyPerSkin:0,carrySkins:!0},curTourney:null,curSavedMatches:null,prevSavedMatches:null,newMatchData:{},viewingMatch:null,ui:{matchesTab:"current",saveBtnDisabled:!1}},v="UPDATE_SETTINGS",E="UPDATE_USERNAME",p="UPDATE_CUR_TOURNEY",y="UPDATE_NEW_MATCH_DATA",f="UPDATE_VIEWING_MATCH",g="STOP_VIEWING_MATCH",b="UPDATE_UI_MATCHES_TAB",S="UPDATE_UI_SAVE_BTN";var w=function(e,t){switch(t.type){case v:return Object(s.a)({},e,{settings:Object(s.a)({},e.settings,{},t.payload)});case E:return Object(s.a)({},e,{settings:Object(s.a)({},e.settings,{username:t.payload})});case p:var a=m.getCurAndPrevSavedMatches(t.payload._id),n=Object(o.a)(a,2),r=n[0],c=n[1];return Object(s.a)({},e,{curTourney:t.payload,curSavedMatches:r,prevSavedMatches:c});case y:return Object(s.a)({},e,{newMatchData:Object(s.a)({},e.newMatchData,{},t.payload)});case f:m.updateSavedMatch(t.payload);var l=m.getCurAndPrevSavedMatches(e.curTourney._id),u=Object(o.a)(l,2),i=u[0],d=u[1],h=Object(s.a)({},e,{curSavedMatches:i,prevSavedMatches:d}),w=window.location.pathname;return w.substring(w.lastIndexOf("/")+1)===t.payload._id?Object(s.a)({},h,{viewingMatch:t.payload}):h;case g:return Object(s.a)({},e,{viewingMatch:{}});case b:return Object(s.a)({},e,{ui:Object(s.a)({},e.ui,{matchesTab:t.payload})});case S:return Object(s.a)({},e,{ui:Object(s.a)({},e.ui,{saveBtnDisabled:t.payload})});default:return console.log("Received unknow action.type",t.type),e}},O={init:function(e){var t=JSON.parse(window.localStorage.getItem("settings"));if(t){var a=t.deviceId,n=t.username,r=t.moneyPerSkin,c=t.carrySkins;return e({type:v,payload:{deviceId:a,username:n,moneyPerSkin:r,carrySkins:c}}),!1}t={};var l=Date.now()+Math.floor(1e3*Math.random());t.deviceId=l;t.username="";t.moneyPerSkin=5;return t.carrySkins=!0,window.localStorage.setItem("settings",JSON.stringify(t)),e({type:v,payload:{deviceId:l,username:"",moneyPerSkin:5,carrySkins:!0}}),!0},updateUsername:function(e,t){t({type:E,payload:e});var a=JSON.parse(window.localStorage.getItem("settings"));a.username=e,window.localStorage.setItem("settings",JSON.stringify(a))}};var T=a(56),C=a.n(T),M={setCurTourney:function e(t,a){var n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,C.a.awrap(fetch("/api/tourneys/current").then((function(e){return e.json()})));case 2:n=r.sent,t({type:p,payload:n}),setTimeout((function(){return e(t,a)}),a);case 5:case"end":return r.stop()}}))}};a(91);var I=a(154),N=a(155),j=a(134),k=a(46);function P(e){var t=e.value,a=e.index,n=e.children;return r.a.createElement(k.a,{component:"div",role:"tabpanel",hidden:t!==a},t===a&&n)}var A=a(130);function _(){return r.a.createElement("section",{className:"flex-col-ctr height-width-100"},r.a.createElement(A.a,null))}var x=a(131);function D(e){var t=e.tourney,a=(e.isCurTourney,t.isStarted),n=t.isFinished,c=t.startDate,l=t.curRound,o=t.roundState;return r.a.createElement(x.a,{title:t.title,subheader:n?"Tourney Completed":a?"Round ".concat(l," ").concat(o):"Starts on ".concat(c),className:"margin-bottom-1rem"})}var R=a(133),U=(a(95),a(158)),B=a(132);function H(e){var t=e.player;return r.a.createElement(U.a,{label:t.name,icon:r.a.createElement(B.a,null),variant:"outlined"})}function W(e){var t,a=e.match,n=e.tourneyRound;t=a.completed?"completed":a.roundNum===n?"in progress":"pending";var c=new Date(a.createdAt).toLocaleString().split("");return c.splice(c.length-6,3).join(""),r.a.createElement(R.a,{variant:"outlined",className:"MatchItem-Card"},r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h5",component:"h2"},"Round ",a.roundNum),r.a.createElement("article",null,r.a.createElement(k.a,{variant:"overline"},"$",a.moneyPerSkin,"/skin (",t,")"))),r.a.createElement("section",null,a.players.map((function(e){return r.a.createElement(H,{player:e})}))),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"caption"},"Created by ",a.username," on ",c)))}function G(e){var t=e.matches,a=e.tourneyRound;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(W,{match:e,tourneyRound:a})})))}function F(){var e=Object(n.useContext)(i).state,t=e.curTourney,a=e.curSavedMatches;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{tourney:t,isCurTourney:!0}),a.length?r.a.createElement(G,{matches:a,tourneyRound:t.roundNum}):r.a.createElement(k.a,{variant:"body1",style:{marginTop:"2rem"}},"You Have No Matches")):r.a.createElement(_,null)}function V(e){e.state,e.dispatch;return r.a.createElement("h1",null,"TODO: This is the PrevTourneyScreen")}function J(){var e=Object(n.useContext)(i),t=e.state,a=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{variant:"fullWidth",value:t.ui.matchesTab,className:"margin-bottom-1rem",onChange:function(e,t){return a({type:b,payload:t})}},r.a.createElement(j.a,{value:"current",label:"Current Tourney"}),r.a.createElement(j.a,{value:"previous",label:"Previous Tourneys"})),r.a.createElement(P,{value:t.ui.matchesTab,index:"current"},r.a.createElement(F,null)),r.a.createElement(P,{value:t.ui.matchesTab,index:"previous"},r.a.createElement(V,null)))}var L=a(138),z=a(152),$=a(136),K=a(139),Y=a(73),q=a(159),Q=a(160),X=a(135),Z=a(157),ee=Object(Y.a)(q.a)({flexDirection:"row"});function te(e){var t=e.round,a=e.onChange;return t&&a&&t?r.a.createElement(Q.a,{component:"fieldset"},r.a.createElement(X.a,{component:"legend"},"Round"),r.a.createElement(ee,{value:""+t,onChange:a},r.a.createElement($.a,{value:"1",control:r.a.createElement(Z.a,{color:"primary"}),label:"1"}),r.a.createElement($.a,{value:"2",control:r.a.createElement(Z.a,{color:"primary"}),label:"2"}),r.a.createElement($.a,{value:"3",control:r.a.createElement(Z.a,{color:"primary"}),label:"3"}),r.a.createElement($.a,{value:"4",control:r.a.createElement(Z.a,{color:"primary"}),label:"4"}))):null}var ae=a(156);function ne(e){var t=e.leaderboard,a=e.onChange,c=Object(n.useRef)(t.map((function(e){return{name:e.name,playerId:e.playerId}})).sort((function(e,t){return e.name<t.name?-1:1})));return r.a.createElement(ae.a,{multiple:!0,autoComplete:!0,autoHighlight:!0,filterSelectedOptions:!0,style:{width:"100%",marginBottom:"8rem"},options:c.current,getOptionLabel:function(e){return e.name},onChange:a,renderInput:function(e){return r.a.createElement(z.a,Object.assign({},e,{variant:"outlined",label:"Select Players",margin:"normal"}))}})}function re(){var e=Object(n.useContext)(i),t=e.state,a=e.dispatch,c=t.curTourney,l=t.settings,o=t.newMatchData,u=function(){var e=o.moneyPerSkin,t=o.selectedPlayerIds;return!t||(e=parseInt(e),t.length<2||isNaN(e)||e<0)}();return Object(n.useEffect)((function(){if(c){var e,t=l.deviceId,n=l.username,r=l.carrySkins,o=l.moneyPerSkin,u=c._id,i=c.title;a({type:y,payload:{deviceId:t,username:n,carrySkins:r,moneyPerSkin:o,tourneyId:u,tourneyTitle:i,roundNum:(e=c,e.isStarted?e.isFinished?"4":e.curRound.toString():"1")}})}}),[c,a,l]),Object(n.useEffect)((function(){a({type:S,payload:u})}),[u,a]),c&&void 0!==o.carrySkins?r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{title:"New Match",subheader:c.title}),r.a.createElement(L.a,{className:"flex-col-ctr"},r.a.createElement(te,{round:o.roundNum,onChange:function(e,t){a({type:y,payload:{roundNum:t}})},color:"primary"}),r.a.createElement(z.a,{label:"Money Per Skin",type:"number",variant:"outlined",min:"1",step:"1",margin:"normal",value:o.moneyPerSkin,onChange:function(e){a({type:y,payload:{moneyPerSkin:e.target.value?parseInt(e.target.value):""}})},color:"primary"}),r.a.createElement($.a,{margin:"normal",label:"Carry Over Skins?",className:"MuiFormLabel-root",control:r.a.createElement(K.a,{value:"carrySkins",checked:o.carrySkins,onChange:function(e){e.target&&a({type:y,payload:{carrySkins:e.target.checked}})},color:"primary"})}),r.a.createElement(ne,{leaderboard:c.leaderboard,onChange:function(e,t){a({type:y,payload:{selectedPlayerIds:t.map((function(e){return e.playerId}))}})}}))):r.a.createElement(_,null)}var ce,le="CREATE_MATCH",oe="START_VIEWING_MATCH",ue="UPDATE_VIEWING_MATCH",ie="STOP_VIEWING_MATCH",se=window.io(),me={createMatch:function(e,t){se.emit(le,e,t)},viewMatch:function(e,t){ce=t,se.emit(oe,e)},stopViewingMatch:function(e){se.emit(ie,e),ce({type:g})}};function de(e){var t=e.match;return r.a.createElement(R.a,{variant:"outlined",className:"margin-bottom-1rem"},r.a.createElement(x.a,{title:t.tourneyTitle,subheader:t.roundNum}))}function he(){var e=Object(u.h)().id,t=Object(n.useContext)(i),a=t.state,c=t.dispatch,l=a.viewingMatch;return Object(n.useEffect)((function(){return me.viewMatch(e,c),function(){me.stopViewingMatch(e)}}),[e,c]),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{match:l})):r.a.createElement(_,null)}function ve(){var e=Object(n.useContext)(i).state.settings;e.deviceId,e.username,e.moneyPerSkin,e.carrySkins;return r.a.createElement(k.a,{variant:"h2"},"Settings Screen")}se.on(ue,(function(e){ce({type:f,payload:e})}));var Ee=a(144),pe=a(145),ye=a(140),fe=a(143),ge=a(141);function be(e){var t=e.handleClick,a=e.disabled;return r.a.createElement(ye.a,{startIcon:r.a.createElement(ge.a,null),variant:"outlined",size:"small",onClick:t,disabled:a},"SAVE")}var Se=a(142);function we(e){var t=e.handleCancel;return r.a.createElement(ye.a,{onClick:t,startIcon:r.a.createElement(Se.a,null),variant:"outlined",size:"small"},"CANCEL")}function Oe(){var e=Object(n.useContext)(i).state,t=e.ui,a=Object(u.g)().pathname,c=Object(u.f)();switch(a){case"/":return"current"===t.matchesTab?r.a.createElement(ye.a,{onClick:function(){return c.push("/matches/new")},startIcon:r.a.createElement(fe.a,null),variant:"outlined",size:"small"},"MATCH"):null;case"/matches/new":return r.a.createElement("span",null,r.a.createElement(we,{handleCancel:function(){c.goBack()}}),"\xa0",r.a.createElement(be,{handleClick:function(){me.createMatch(e.newMatchData,(function(e,t){c.push("/matches/".concat(t))}))},disabled:t.saveBtnDisabled}));case"/settings":default:return null}}function Te(){return r.a.createElement(Ee.a,{position:"sticky"},r.a.createElement(pe.a,{className:"justify-content-between"},r.a.createElement(k.a,{variant:"h6"},"PGA SKINS"),r.a.createElement(Oe,null)))}var Ce=a(146),Me=a(147),Ie=a(148),Ne=a(149);function je(){var e=Object(u.f)(),t=Object(u.g)().pathname;return r.a.createElement(Ce.a,{value:t,onChange:function(t,a){return e.push(a)},showLabels:!0},r.a.createElement(Me.a,{value:"/",label:"Matches",icon:r.a.createElement(Ie.a,null)}),r.a.createElement(Me.a,{value:"/settings",label:"Settings",icon:r.a.createElement(Ne.a,null)}))}var ke=function(){return r.a.createElement(I.a,{className:"GWBM_grid"},r.a.createElement(Te,null),r.a.createElement(I.a,{className:"GWBM_content"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/matches/new",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(u.a,{path:"/matches/:id",render:function(){return r.a.createElement(he,null)}}),r.a.createElement(u.a,{path:"/settings",render:function(){return r.a.createElement(ve,null)}}),r.a.createElement(u.a,{path:"/",render:function(){return r.a.createElement(J,null)}}))),r.a.createElement(je,null))},Pe=(a(97),a(150));var Ae=function(e){var t=Object(u.f)(),a=Object(n.useContext)(i).dispatch,c=Object(n.useState)(""),l=Object(o.a)(c,2),s=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"h4",className:"text-center",style:{marginBottom:"2rem"}},"Welcome to",r.a.createElement("br",null),"PGA SKINS!"),r.a.createElement(k.a,{variant:"body2",className:"text-center"},"Please enter the user name you want others to see when viewing a skins match created by you:",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(z.a,{autoComplete:"off",variant:"outlined",placeholder:"User Name",fullWidth:!0,value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement(ye.a,{onClick:function(){O.updateUsername(s,a),t.push("/")},disabled:s.length<3||s.length>20,style:{marginTop:"1rem"},variant:"contained"},"SUBMIT"))};var _e=function(){return r.a.createElement(I.a,{className:"GNM_grid"},r.a.createElement(Te,null),r.a.createElement(Pe.a,{className:"flex-col-ctr"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/welcome",render:function(){return r.a.createElement(Ae,null)}}))))};function xe(){var e=Object(u.f)(),t=Object(n.useReducer)(w,h),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){M.setCurTourney(l,36e5),O.init(l)&&e.push("/welcome")}),[]),console.log("TODO: remove window.dispatch"),window.dispatch=l,r.a.createElement(i.Provider,{value:{state:c,dispatch:l}},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/welcome",render:function(){return r.a.createElement(_e,null)}}),r.a.createElement(u.a,{path:"/",render:function(){return r.a.createElement(ke,null)}})))}a(98),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=a(28),Re=a(72),Ue=a(151),Be=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(Be,"px")),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}));var He=Object(Re.a)({palette:{primary:{main:"#d5dcd6",contrastText:"#051907"},secondary:{main:"#d8dae8",contrastText:"#051907"}},overrides:{MuiBottomNavigationAction:{root:{color:"white","&$selected":{color:"#051907"}}},MuiBottomNavigation:{root:{backgroundColor:"#d5dcd6"}}}},"Minty Green");l.a.render(r.a.createElement(De.a,null,r.a.createElement(u.a,{path:"/",render:function(){return r.a.createElement(Ue.a,{theme:He},r.a.createElement(xe,null))}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[85,1,2]]]);
//# sourceMappingURL=main.9cd60b31.chunk.js.map