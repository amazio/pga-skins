(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),o=a(13),i=a(34),u=Object(n.createContext)({state:null,dispatch:null}),s=a(16),m={initialize:function(e){var t=JSON.parse(window.localStorage.getItem("settings"));if(t)return!1;t={};var a=Date.now()+Math.floor(1e3*Math.random());t.deviceId=a;t.username="";t.moneyPerSkin=5;return t.carrySkins=!0,window.localStorage.setItem("settings",JSON.stringify(t)),e({type:y.UPDATE_SETTINGS,payload:{deviceId:a,username:"",moneyPerSkin:5,carrySkins:!0}}),!0},getSettings:function(){return JSON.parse(window.localStorage.getItem("settings"))},updateUsername:function(e,t){var a=JSON.parse(window.localStorage.getItem("settings"));a.username=e,window.localStorage.setItem("settings",JSON.stringify(a)),t({type:y.UPDATE_USERNAME,payload:e})}};var d={getSavedMatches:E,setSavedMatches:function(e){window.localStorage.setItem("matches",JSON.stringify(e))},getMatchesByTourneyId:function(e){return E().filter((function(t){return t.tourneyId===e}))},getCurAndPrevSavedMatches:function(e){var t=E(),a=t.filter((function(t){return t.tourneyId===e})),n=t.filter((function(t){return t.tourneyId!==e}));return[a,n,t]},updateSavedMatch:function(e){if(!e)return;var t=E(),a=t.findIndex((function(t){return t._id===e._id}));-1===a?t.unshift(e):t[a]=e;window.localStorage.setItem("matches",JSON.stringify(t))}};function E(){var e=JSON.parse(window.localStorage.getItem("matches"));return Array.isArray(e)||(window.localStorage.setItem("matches","[]"),e=[]),e}var h=m.getSettings(),p=d.getCurAndPrevSavedMatches(),v=Object(o.a)(p,2),f={settings:h||{deviceId:"",username:"",moneyPerSkin:0,carrySkins:!0},curTourney:null,curSavedMatches:v[0],prevSavedMatches:v[1],newMatchData:{},viewingMatch:null,ui:{matchesTab:"current",saveBtnDisabled:!1}},y={UPDATE_SETTINGS:"UPDATE_SETTINGS",UPDATE_USERNAME:"UPDATE_USERNAME",UPDATE_CUR_TOURNEY:"UPDATE_CUR_TOURNEY",UPDATE_NEW_MATCH_DATA:"UPDATE_NEW_MATCH_DATA",UPDATE_VIEWING_MATCH:"UPDATE_VIEWING_MATCH",SET_ALL_MATCHES:"SET_ALL_MATCHES",STOP_VIEWING_MATCH:"STOP_VIEWING_MATCH",UPDATE_UI_MATCHES_TAB:"UPDATE_UI_MATCHES_TAB",UPDATE_UI_SAVE_BTN:"UPDATE_UI_SAVE_BTN"};var T,g=function(e,t){var a,n;switch(t.type){case y.UPDATE_SETTINGS:return Object(s.a)({},e,{settings:Object(s.a)({},e.settings,{},t.payload)});case y.UPDATE_USERNAME:return Object(s.a)({},e,{settings:Object(s.a)({},e.settings,{username:t.payload})});case y.UPDATE_CUR_TOURNEY:var r=d.getCurAndPrevSavedMatches(t.payload._id),c=Object(o.a)(r,2);return a=c[0],n=c[1],Object(s.a)({},e,{curTourney:t.payload,curSavedMatches:a,prevSavedMatches:n});case y.UPDATE_NEW_MATCH_DATA:return Object(s.a)({},e,{newMatchData:Object(s.a)({},e.newMatchData,{},t.payload)});case y.UPDATE_VIEWING_MATCH:d.updateSavedMatch(t.payload);var l=window.location.pathname;return l.substring(l.lastIndexOf("/")+1)===t.payload._id?Object(s.a)({},e,{viewingMatch:t.payload}):e;case y.SET_ALL_MATCHES:if(d.setSavedMatches(t.payload),e.curTourney){var i=d.getCurAndPrevSavedMatches(e.curTourney._id),u=Object(o.a)(i,2);return a=u[0],n=u[1],Object(s.a)({},e,{curSavedMatches:a,prevSavedMatches:n})}return Object(s.a)({},e);case y.STOP_VIEWING_MATCH:return Object(s.a)({},e,{viewingMatch:null});case y.UPDATE_UI_MATCHES_TAB:return Object(s.a)({},e,{ui:Object(s.a)({},e.ui,{matchesTab:t.payload})});case y.UPDATE_UI_SAVE_BTN:return Object(s.a)({},e,{ui:Object(s.a)({},e.ui,{saveBtnDisabled:t.payload})});default:return console.log("Received unknow action.type",t.type),e}},S=a(46),A=a.n(S),_="CREATE_MATCH",b="START_VIEWING_MATCH",N="UPDATE_VIEWING_MATCH",M="STOP_VIEWING_MATCH",C="SYNC_MATCHES",I=window.io(),w={setDispatch:function(e){T=e},syncMatchesWithServer:function(){var e;return A.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=d.getSavedMatches().map((function(e){return e._id})),I.emit(C,e,(function(e){T({type:y.SET_ALL_MATCHES,payload:e})}));case 2:case"end":return t.stop()}}))},createMatch:function(e,t){I.emit(_,e,t)},viewMatch:function(e,t){T=t,I.emit(b,e,(function(e){e||T({type:y.STOP_VIEWING_MATCH})}))},stopViewingMatch:function(e){I.emit(M,e),T({type:y.STOP_VIEWING_MATCH})}};I.on(N,(function(e){e&&T({type:y.UPDATE_VIEWING_MATCH,payload:e})}));var O={setCurTourney:function(e){var t;return A.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A.a.awrap(fetch("/api/tourneys/current").then((function(e){return e.json()})));case 2:t=a.sent,e({type:y.UPDATE_CUR_TOURNEY,payload:t});case 4:case"end":return a.stop()}}))}};a(91);var P=a(157),U=a(158),D=a(137),k=a(47);function j(e){var t=e.value,a=e.index,n=e.children;return r.a.createElement(k.a,{component:"div",role:"tabpanel",hidden:t!==a},t===a&&n)}var x=a(133);function H(){return r.a.createElement("section",{className:"flex-col-ctr height-width-100"},r.a.createElement(x.a,null))}var R=a(134);function W(e){var t=e.tourney,a=(e.isCurTourney,t.isStarted),n=t.isFinished,c=t.startDate,l=t.curRound,o=t.roundState;return r.a.createElement(R.a,{title:t.title,subheader:n?"Tourney Completed":a?"Round ".concat(l," ").concat(o):"Starts on ".concat(c),className:"margin-bottom-1rem"})}var G=a(26),B=a(136),V=(a(95),a(161)),L=a(135);a(96);function F(e){var t=Math.abs(e);return e<0?" ".concat("\u25bc","$").concat(t):e>0?" ".concat("\u25b2","$").concat(t):" $".concat(t)}function J(e){var t=e.player;return r.a.createElement(V.a,{className:"PlayerChip",label:"".concat(t.name,"\n").concat(F(t.money)),icon:r.a.createElement(L.a,null),variant:"outlined"})}function z(e){var t,a=e.match,n=e.tourneyRound;t=a.completed?"completed":a.roundNum===n?"in progress":"pending";var c=new Date(a.createdAt).toLocaleString().split("");return c.splice(c.length-6,3).join(""),r.a.createElement(B.a,{variant:"outlined",className:"MatchItem-card"},r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h5",style:{fontSize:"1.25rem"}},"Round ",a.roundNum),r.a.createElement("article",null,r.a.createElement(k.a,{variant:"overline"},"$",a.moneyPerSkin,"/skin (",t,")"))),r.a.createElement("section",null,a.players.map((function(e){return r.a.createElement(J,{player:e,key:e.playerId})}))),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"caption"},"Created by ",a.username," on ",c)))}function $(e){var t=e.matches,a=e.tourneyRound;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(G.b,{to:"/matches/".concat(e._id),key:e._id},r.a.createElement(z,{match:e,tourneyRound:a}))})))}function Y(){var e=Object(n.useContext)(u).state,t=e.curTourney,a=e.curSavedMatches;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{tourney:t,isCurTourney:!0}),a.length?r.a.createElement($,{matches:a,tourneyRound:t.roundNum}):r.a.createElement(k.a,{variant:"body1",style:{marginTop:"2rem"}},"You Have No Matches")):r.a.createElement(H,null)}function K(e){e.state,e.dispatch;return r.a.createElement("h1",null,"TODO: This is the PrevTourneyScreen")}function q(){var e=Object(n.useContext)(u),t=e.state,a=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"fullWidth",value:t.ui.matchesTab,className:"margin-bottom-1rem",onChange:function(e,t){return a({type:y.UPDATE_UI_MATCHES_TAB,payload:t})}},r.a.createElement(D.a,{value:"current",label:"Current Tourney"}),r.a.createElement(D.a,{value:"previous",label:"Previous Tourneys"})),r.a.createElement(j,{value:t.ui.matchesTab,index:"current"},r.a.createElement(Y,null)),r.a.createElement(j,{value:t.ui.matchesTab,index:"previous"},r.a.createElement(K,null)))}var Q=a(141),X=a(155),Z=a(139),ee=a(142),te=a(73),ae=a(162),ne=a(163),re=a(138),ce=a(160),le=Object(te.a)(ae.a)({flexDirection:"row"});function oe(e){var t=e.round,a=e.onChange;return t&&a&&t?r.a.createElement(ne.a,{component:"fieldset"},r.a.createElement(re.a,{component:"legend"},"Round"),r.a.createElement(le,{value:""+t,onChange:a},r.a.createElement(Z.a,{value:"1",control:r.a.createElement(ce.a,{color:"primary"}),label:"1"}),r.a.createElement(Z.a,{value:"2",control:r.a.createElement(ce.a,{color:"primary"}),label:"2"}),r.a.createElement(Z.a,{value:"3",control:r.a.createElement(ce.a,{color:"primary"}),label:"3"}),r.a.createElement(Z.a,{value:"4",control:r.a.createElement(ce.a,{color:"primary"}),label:"4"}))):null}var ie=a(159);function ue(e){var t=e.leaderboard,a=e.onChange,c=Object(n.useRef)(t.map((function(e){return{name:e.name,playerId:e.playerId}})).sort((function(e,t){return e.name<t.name?-1:1})));return r.a.createElement(ie.a,{multiple:!0,autoComplete:!0,autoHighlight:!0,filterSelectedOptions:!0,style:{width:"100%",marginBottom:"8rem"},options:c.current,getOptionLabel:function(e){return e.name},onChange:a,renderInput:function(e){return r.a.createElement(X.a,Object.assign({},e,{variant:"outlined",label:"Select Players",margin:"normal"}))}})}function se(){var e=Object(n.useContext)(u),t=e.state,a=e.dispatch,c=t.curTourney,l=t.settings,o=t.newMatchData,i=function(){var e=o.moneyPerSkin,t=o.selectedPlayerIds;return!t||(e=parseInt(e),t.length<2||isNaN(e)||e<0)}();return Object(n.useEffect)((function(){if(c){var e,t=l.deviceId,n=l.username,r=l.carrySkins,o=l.moneyPerSkin,i=c._id,u=c.title;a({type:y.UPDATE_NEW_MATCH_DATA,payload:{deviceId:t,username:n,carrySkins:r,moneyPerSkin:o,tourneyId:i,tourneyTitle:u,roundNum:(e=c,e.isStarted?e.isFinished?"4":e.curRound.toString():"1")}})}}),[c,a,l]),Object(n.useEffect)((function(){a({type:y.UPDATE_UI_SAVE_BTN,payload:i})}),[i,a]),c&&void 0!==o.carrySkins?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{title:"New Match",subheader:c.title}),r.a.createElement(Q.a,{className:"flex-col-ctr"},r.a.createElement(oe,{round:o.roundNum,onChange:function(e,t){a({type:y.UPDATE_NEW_MATCH_DATA,payload:{roundNum:t}})},color:"primary"}),r.a.createElement(X.a,{label:"Money Per Skin",type:"number",variant:"outlined",min:"1",step:"1",margin:"normal",value:o.moneyPerSkin,onChange:function(e){a({type:y.UPDATE_NEW_MATCH_DATA,payload:{moneyPerSkin:e.target.value?parseInt(e.target.value):""}})},color:"primary"}),r.a.createElement(Z.a,{margin:"normal",label:"Carry Over Skins?",className:"MuiFormLabel-root",control:r.a.createElement(ee.a,{value:"carrySkins",checked:o.carrySkins,onChange:function(e){e.target&&a({type:y.UPDATE_NEW_MATCH_DATA,payload:{carrySkins:e.target.checked}})},color:"primary"})}),r.a.createElement(ue,{leaderboard:c.leaderboard,onChange:function(e,t){a({type:y.UPDATE_NEW_MATCH_DATA,payload:{selectedPlayerIds:t.map((function(e){return e.playerId}))}})}}))):r.a.createElement(H,null)}a(98);function me(e){var t=e[e.lastIndexOf(" ")+1];return"".concat(e[0]).concat(t).toUpperCase()}function de(e){var t=e.match,a=t.players[0].round.holes.map((function(e,t){return{holeNum:t+1,par:e.par}})),n=a.filter((function(e){return e.holeNum<10})),c=a.filter((function(e){return e.holeNum>9})),l=t.players.map((function(e){return{name:e.name,holes:e.round.holes.map((function(e){return r.a.createElement("div",{className:"player-hole-container flex-col-ctr"},r.a.createElement("span",{className:"player-hole flex-col-ctr",style:{color:"var(--dark-green-text)",borderColor:(e.skin||e.carry)&&"var(--light-green)",backgroundColor:e.skin&&"var(--pale-green-bg)"}},e.strokes))}))}}));return r.a.createElement("main",{id:"match-grid"},r.a.createElement("span",null),n.map((function(e){return r.a.createElement(k.a,{variant:"caption",key:e.holeNum,className:"hole"},e.holeNum,r.a.createElement("br",null),r.a.createElement("span",{className:"par"},e.par))})),l.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MatchGrid-initials flex-col-ctr"},me(e.name)),e.holes.filter((function(e,t){return t<9})))})),new Array(10).fill(null).map((function(e){return r.a.createElement("div",{className:"MatchGrid-spacer"})})),r.a.createElement("span",null),c.map((function(e){return r.a.createElement(k.a,{variant:"caption",key:e.holeNum,className:"hole"},e.holeNum,r.a.createElement("br",null),r.a.createElement("span",{className:"par"},e.par))})),l.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"MatchGrid-initials flex-col-ctr"},me(e.name)),e.holes.filter((function(e,t){return t>8})))})))}a(99);function Ee(e){var t,a=e.match,n=e.tourneyRound;t=a.completed?"completed":a.roundNum===n?"in progress":"pending";var c=new Date(a.createdAt).toLocaleString().split("");c.splice(c.length-6,3).join("");var l=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Round ".concat(a.roundNum)),r.a.createElement("br",null),r.a.createElement("span",null,"$","".concat(a.moneyPerSkin,"/skin (").concat(t,")")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{title:a.tourneyTitle,subheader:l}),r.a.createElement(de,{match:a}),r.a.createElement(k.a,{variant:"caption",id:"MatchCard-created-by"},"Created by ",a.username," on ",c))}function he(){var e=Object(i.h)().id,t=Object(n.useContext)(u),a=t.state,c=t.dispatch,l=a.viewingMatch,o=a.curTourney;return Object(n.useEffect)((function(){return w.viewMatch(e,c),function(){w.stopViewingMatch(e)}}),[e,c]),l&&o?r.a.createElement(Ee,{match:l,tourneyRound:o.curRound}):r.a.createElement(k.a,{variant:"body1",style:{marginTop:"2rem"}},"Sorry",r.a.createElement("br",null),"Match No Longer Exists")}function pe(){var e=Object(n.useContext)(u).state.settings;e.deviceId,e.username,e.moneyPerSkin,e.carrySkins;return r.a.createElement(k.a,{variant:"h2"},"Settings Screen")}var ve=a(147),fe=a(148),ye=a(143),Te=a(146),ge=a(144);function Se(e){var t=e.handleClick,a=e.disabled;return r.a.createElement(ye.a,{startIcon:r.a.createElement(ge.a,null),variant:"outlined",size:"small",onClick:t,disabled:a},"SAVE")}var Ae=a(145);function _e(e){var t=e.handleCancel;return r.a.createElement(ye.a,{onClick:t,startIcon:r.a.createElement(Ae.a,null),variant:"outlined",size:"small"},"CANCEL")}function be(){var e=Object(n.useContext)(u).state,t=e.ui,a=Object(i.g)().pathname,c=Object(i.f)();switch(a){case"/":return"current"===t.matchesTab?r.a.createElement(ye.a,{onClick:function(){return c.push("/matches/new")},startIcon:r.a.createElement(Te.a,null),variant:"outlined",size:"small"},"MATCH"):null;case"/matches/new":return r.a.createElement("span",null,r.a.createElement(_e,{handleCancel:function(){c.goBack()}}),"\xa0",r.a.createElement(Se,{handleClick:function(){w.createMatch(e.newMatchData,(function(e,t){d.updateSavedMatch(t),c.push("/matches/".concat(t._id))}))},disabled:t.saveBtnDisabled}));case"/settings":default:return null}}function Ne(){return r.a.createElement(ve.a,{position:"sticky"},r.a.createElement(fe.a,{className:"justify-content-between"},r.a.createElement(k.a,{variant:"h6"},"PGA SKINS"),r.a.createElement(be,null)))}var Me=a(149),Ce=a(150),Ie=a(151),we=a(152);function Oe(){var e=Object(i.f)(),t=Object(i.g)().pathname;return r.a.createElement(Me.a,{value:t,onChange:function(t,a){return e.push(a)},showLabels:!0},r.a.createElement(Ce.a,{value:"/",label:"Matches",icon:r.a.createElement(Ie.a,null)}),r.a.createElement(Ce.a,{value:"/settings",label:"Settings",icon:r.a.createElement(we.a,null)}))}var Pe=function(){return r.a.createElement(P.a,{className:"GWBM_grid"},r.a.createElement(Ne,null),r.a.createElement(P.a,{className:"GWBM_content"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/matches/new",render:function(){return r.a.createElement(se,null)}}),r.a.createElement(i.a,{path:"/matches/:id",render:function(){return r.a.createElement(he,null)}}),r.a.createElement(i.a,{path:"/settings",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(i.a,{path:"/",render:function(){return r.a.createElement(q,null)}}))),r.a.createElement(Oe,null))},Ue=(a(100),a(153));var De=function(e){var t=Object(i.f)(),a=Object(n.useContext)(u).dispatch,c=Object(n.useState)(""),l=Object(o.a)(c,2),s=l[0],d=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"h4",className:"text-center",style:{marginBottom:"2rem"}},"Welcome to",r.a.createElement("br",null),"PGA SKINS!"),r.a.createElement(k.a,{variant:"body2",className:"text-center"},"Please enter the user name you want others to see when viewing a skins match created by you:",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(X.a,{autoComplete:"off",variant:"outlined",placeholder:"User Name",fullWidth:!0,value:s,onChange:function(e){return d(e.target.value)}}),r.a.createElement(ye.a,{onClick:function(){m.updateUsername(s,a),t.push("/")},disabled:s.length<3||s.length>20,style:{marginTop:"1rem"},variant:"contained"},"SUBMIT"))};var ke=function(){return r.a.createElement(P.a,{className:"GNM_grid"},r.a.createElement(Ne,null),r.a.createElement(Ue.a,{className:"flex-col-ctr"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/welcome",render:function(){return r.a.createElement(De,null)}}))))};function je(){var e=Object(i.f)(),t=Object(n.useReducer)(g,f),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var t=O.setCurTourney(l,36e5);return w.setDispatch(l),w.syncMatchesWithServer(),m.initialize(l)&&e.replace("/welcome"),function(){clearInterval(t)}}),[]),r.a.createElement(u.Provider,{value:{state:c,dispatch:l}},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/welcome",render:function(){return r.a.createElement(ke,null)}}),r.a.createElement(i.a,{path:"/",render:function(){return r.a.createElement(Pe,null)}})))}a(101),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xe=a(72),He=a(154),Re=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(Re,"px")),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}));var We=Object(xe.a)({palette:{primary:{main:"#d5dcd6",contrastText:"#051907"},secondary:{main:"#d8dae8",contrastText:"#051907"}},overrides:{MuiBottomNavigationAction:{root:{color:"white","&$selected":{color:"#051907"}}},MuiBottomNavigation:{root:{backgroundColor:"#d5dcd6"}}}},"Minty Green");l.a.render(r.a.createElement(G.a,null,r.a.createElement(i.a,{path:"/",render:function(){return r.a.createElement(He.a,{theme:We},r.a.createElement(je,null))}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},85:function(e,t,a){e.exports=a(102)},91:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.29903577.chunk.js.map